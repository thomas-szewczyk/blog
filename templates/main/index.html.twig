{% extends 'base.html.twig' %}

{% block title %}Blog{% endblock %}
{% block stylesheets %}
    {{ parent() }}
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/css/splide.min.css">
{% endblock %}
{% block body %}

    {% if rss.channel.item|length >= 6 %}

    {{ include('main/_rssslider.html.twig') }}

    {% endif %}
    {% set latestPost = latest_post %}

    {% if latestPost %}
        <div class="jumbotron p-3 p-md-5 text-white bg-dark" style="background-image: url('{{ absolute_url(asset('assets/img/' ~ latestPost.imageFile)) }}'); background-position: center;background-size: cover;box-shadow:inset 0 0 0 2000px rgba(33, 36, 39, 0.65);">
            <div class="container py-5">
                <h1 class="display-4 font-italic">{{ latestPost.title }}</h1>
                <p class="lead my-3">{{ latestPost.description }}</p>
                <p class="lead mb-0"><a href="{{ path('show', { id: latestPost.id }) }}" class="text-white font-weight-bold btn btn-danger">Continue reading</a></p>
            </div>
        </div>
    {% endif %}

    <div class="container">
        <div class="row mb-2 py-4">
            {% if latest_posts is empty %}
                <div class="col-12">
                    <p class="text-center py-5">
                        <span class="display-4">No posts available yet...</span>
                    </p>
                </div>
            {% endif %}
            {% for post in latest_posts %}
                {% if not loop.first %}
                    <div class="col-md-6">
                        <div class="card rounded border-danger flex-md-row mb-4 shadow-sm h-md-250">
                            <div class="card-body d-flex flex-column align-items-start">
                                {# <strong class="d-inline-block mb-2 text-primary">Add category here</strong> #}
                                <h4 class="mb-0">
                                    <a class="text-dark" href="#">{{ post.title }}</a>
                                </h4>
                                {# <div class="mb-1 text-muted">Add date soon here</div> #}
                                <p class="card-text mt-4 mb-auto">{{ post.description }}</p>
                                <a href="{{ path('show', { id: post.id }) }}" class="text-danger">Continue reading</a>
                            </div>
                            <img class="card-img-right flex-auto d-none d-lg-block" src="{{ absolute_url(asset('assets/img/' ~ post.imageFile)) }}" alt="Thumbnail [200x250]" style="width: 200px; height: 250px;object-fit: cover" >
                        </div>
                    </div>
                {% endif %}

            {% endfor %}

        </div>
    </div>
{% endblock %}
{% block javascripts %}
    {{ parent() }}
    <script src="https://cdn.jsdelivr.net/npm/@splidejs/splide@latest/dist/js/splide.min.js"></script>
    <script>
        new Splide( '.splide', {
            type   : 'loop',
            perPage: 3,
            perMove: 1,
            pagination: false,
            arrows: false,
            autoplay: true,
            number: 3000
        } ).mount();
    </script>
{% endblock %}
